# 快速启动指南 - 好友和消息功能

## ? 快速开始

### 步骤1：启动应用

```bash
# 进入项目目录
cd D:\VSCode\campus-social-matching

# 启动Flask应用
python app.py
```

应用将在 `http://localhost:5001` 启动

### 步骤2：登录系统

1. 访问 `http://localhost:5001/login`
2. 使用已有账号登录，或注册新账号

### 步骤3：访问好友和消息功能

#### 方式1：从首页导航（推荐）
- 登录成功后会进入首页 `/`
- 右上角导航按钮包含：
  - **好友**：跳转到 `http://localhost:5001/friends?tab=search`，默认打开“添加好友”标签页
  - **消息**：跳转到 `http://localhost:5001/messages`，进入消息中心

#### 方式2：直接访问URL
- 好友管理：`http://localhost:5001/friends`（默认进入“我的好友”标签）
- 消息中心：`http://localhost:5001/messages`

## ? 功能测试清单

### ? 好友功能测试

1. **搜索用户**
   - [ ] 访问 `/friends` 页面
   - [ ] 点击"添加好友"标签
   - [ ] 输入用户名搜索
   - [ ] 点击"添加好友"按钮

2. **处理好友请求**
   - [ ] 使用另一个账号登录
   - [ ] 访问 `/friends` 页面
   - [ ] 点击"好友请求"标签
   - [ ] 接受或拒绝请求

3. **查看好友列表**
   - [ ] 访问 `/friends` 页面
   - [ ] 查看"我的好友"标签
   - [ ] 确认好友显示正确

4. **删除好友**
   - [ ] 在好友列表中点击"删除"按钮
   - [ ] 确认删除成功

### ? 消息功能测试

1. **发送消息**
   - [ ] 访问 `/messages` 页面
   - [ ] 选择一个会话或从好友列表点击"发消息"
   - [ ] 输入消息内容
   - [ ] 点击"发送"或按Enter键

2. **查看聊天记录**
   - [ ] 选择一个会话
   - [ ] 查看历史消息
   - [ ] 确认消息显示正确

3. **会话列表**
   - [ ] 查看会话列表
   - [ ] 确认未读消息数显示正确
   - [ ] 确认最后一条消息预览正确

## ? 数据库初始化

### 如果表未自动创建，运行：

```bash
python database/init_database.py
```

### 或使用MySQL直接执行SQL：

```bash
mysql -u root -p campus_social < database/create_tables.sql
```

## ? 常见问题

### Q1: 页面显示404错误
**A:** 确保已添加路由到 `app.py`，检查路由是否正确

### Q2: 无法发送消息
**A:** 
- 检查是否已登录
- 检查浏览器控制台是否有错误
- 检查API请求是否成功

### Q3: 好友请求不显示
**A:**
- 刷新页面
- 检查数据库表是否正确创建
- 检查网络请求是否成功

### Q4: 消息不实时更新
**A:** 消息每30秒自动刷新一次，这是正常的轮询机制

## ? 下一步

1. （已完成）首页右上角已内置“好友”“消息”导航按钮
2. 可以添加消息通知功能（可选）
3. 可以添加文件/图片发送功能（可选）
4. 可以添加群聊功能（可选）

## ? 技术支持

如有问题，请检查：
1. 浏览器控制台错误信息
2. Flask应用日志
3. 数据库连接状态
4. API接口返回状态

---

**祝使用愉快！** ?
